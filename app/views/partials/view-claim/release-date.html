{% from "govuk/components/date-input/macro.njk" import govukDateInput %}
{% from "govuk/components/button/macro.njk" import govukButton %}

{# TODO: LOGIC NEEDED FOR SETTING NEW RELEASE DATE AS release-date-is-set IS NEEEDED IN THE POST#}

{% set releaseDate %}
  {% if unlock %}
    <fieldset>
      {{ govukDateInput({
        id: "release-date-section",
        namePrefix: "release-date-section",
        errorMessage: errors.release-date-section[0],
        formGroup: {
          classes: "govuk-!-margin-bottom-0"
        },
        items: [
          {
            name: "day",
            id: "release-day",
            classes: "govuk-input--width-2",
            value: Claim.releaseDay
          },
          {
            name: "month",
            id: "release-month",
            classes: "govuk-input--width-2",
            value: Claim.releaseMonth
          },
          {
            name: "year",
            id: "release-year",
            classes: "govuk-input--width-4",
            value: Claim.releaseYear
          }
        ]
      }) }}
    </fieldset>
    {% set saveButton %}
 {# TODO: BUTTON HERE IN DESIGN #}
{% endset %}
  {% else %}
    {% if Claim.ReleaseDate %}
      {{ getDateFormatted.shortDate(Claim.ReleaseDate) }}
    {% else %}
      <span class="text-pending">Pending</span>
    {% endif %}
  {% endif %}
{% endset %}

{{ govukTable({
  caption: "Release Information",
  captionClasses: "govuk-table__caption--l",
  firstCellIsHeader: true,
  rows: [
    [
      {
        text: "Release Date",
        classes: "claim-table-width-one-third vertical-align-middle",
        id: "benefit-owner-name"
      },
      {
        html: releaseDate,
        classes: "govuk-!-width-one-third"
      },
      {
        html: saveButton,
        classes: "govuk-!-width-one-third vertical-align-middle "
      }
    ]
  ]
}) }}
